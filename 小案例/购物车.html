<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Document</title>
 <style>
  [v-cloak]{
   display: none;
  }
  table{
   border: 1px solid #e9e9e9;
   border-collapse: collapse;
   border-spacing: 0;
   text-align: center;
  }
  th,td{
   padding: 8px 16px;
   border: 1px solid #e9e9e9;
  }
  th{
   background-color: #f7f7f7;
   color: black;
   font-weight: 600;
  }
 </style>
</head>
<body>
 <div id="app" v-cloak>
  <div v-if="books.length">
   <table>
    <thead>
     <tr>
      <th></th>
      <th>书籍名称</th>
      <th>出版日期</th>
      <th>价格</th>
      <th>购买数量</th>
      <th>操作</th>
     </tr>
    </thead>
    <tbody>
     <tr v-for='(book,index) in books'>
      <td>{{book.id}}</td>
      <td>{{book.name}}</td>
      <td>{{book.date}}</td>
      <td>{{"$ "+book.price.toFixed(2)}}</td>
      <td>
       <button @click="book.count--" v-bind:disabled="!(book.count>1)">-</button>
       {{book.count}}
       <button @click='increment(index)'>+</button>
      </td>
      <td><button @click='remove(index)'>移除</button></td>
     </tr>
    </tbody>
   </table>
   <h2>总价:  {{'$ '+totalPrice.toFixed(2)}}</h2>
  </div>
  <h2 v-else>购物车为空</h2>
 </div>
 <script src="../vue.js"></script>
 <script>
  const vm=new Vue({
   el:'#app',
   data:{
    books:[
     {
      id:1,
      name:'<算法导论>',
      date:'2006-9',
      price:85.00,
      count:1
     },
     {
      id:2,
      name:'<算法导论>',
      date:'2006-9',
      price:85.00,
      count:1
     },
     {
      id:3,
      name:'<算法导论>',
      date:'2006-9',
      price:85.00,
      count:1
     },
     {
      id:3,
      name:'<算法导论>',
      date:'2006-9',
      price:85.00,
      count:1
     },
     {
      id:3,
      name:'<算法导论>',
      date:'2006-9',
      price:85.00,
      count:1
     },
     {
      id:3,
      name:'<算法导论>',
      date:'2006-9',
      price:85.00,
      count:1
     }
     ,    {
      id:3,
      name:'<算法导论>',
      date:'2006-9',
      price:85.00,
      count:1
     }
    ]
   },
   methods:{
    increment:function(index){
     this.books[index].count++;
    },
    decrement:function(index){
     this.books[index].count--;
    },
    remove:function(index){
     this.books.splice(index,1);
    }
   },
   computed:{
    totalPrice:function(){
     return this.books.reduce((pre,book)=>{
      return pre+book.count*book.price
     },0)
    }
   }
  })
 </script>
</body>
</html>